"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[433],{20433:function(e,t,a){a.r(t);var s=a(29439),r=a(93393),n=a(84330),o=a(73538),u=a(65033),i=a(97239),l=a(47313),f=a(16157),d=a(36634),h=a(70816),m=a.n(h),v=a(46417);r.kL.register(r.uw,r.f$,r.od,r.jn,r.ZL,r.RM,r.Dx,r.u,r.De);t.default=function(e){var t=e.visualization,a=e.metadata,r=t.fieldId,h=d.ZP.deserialize(a),p=h.color,c=h.graphType,g=h.graphFunction,y=h.graphTimestep,M=(0,l.useContext)(n.N),Y=(0,i.P)(M),k=(0,u.s)(Y.apiKey,r),w=(0,s.Z)(k,1)[0],D=(0,l.useMemo)((function(){if("none"===g)return[w.map((function(e){return e.value})),w.map((function(e){return m()(e.createdAt).format("MMM D YYYY, h:mm:ss")}))];for(var e,t=[],a=new Date(-864e13),s=[],r=[],n=0;n<w.length;n++){var o=w[n],u=new Date(o.createdAt),i=void 0;if("yearly"===y)u.setHours(0,0,0,0),u.setDate(1),u.setMonth(0),i=m()(u).diff(m()(a),"years",!0);else if("biannually"===y){var l=Math.floor(u.getMonth()/6);u.setHours(0,0,0,0),u.setDate(1),u.setMonth(6*l),i=m()(u).diff(m()(a),"months",!0)/6}else if("quarterly"===y){var f=Math.floor(u.getMonth()/3);u.setHours(0,0,0,0),u.setDate(1),u.setMonth(3*f),i=m()(u).diff(m()(a),"months",!0)/3}else if("monthly"===y)u.setHours(0,0,0,0),u.setDate(1),i=m()(u).diff(m()(a),"months",!0);else if("biweekly"===y){if(0===n){var d=Math.trunc((u.getDate()-1)/7);u=m()(u).startOf("month").add(d,"weeks").toDate()}else{m()(u).diff(m()(a),"weeks",!0)/2>1&&(u=m()(u).add(1,"weeks").toDate())}i=m()(u).diff(m()(a),"weeks",!0)/2}else if("weekly"===y){if(0===n){var h=Math.trunc((u.getDate()-1)/7);u=m()(u).startOf("month").add(h,"weeks").toDate()}else{m()(u).diff(m()(a),"weeks",!0)>1>1&&(u=m()(u).add(1,"weeks").toDate())}i=m()(u).diff(m()(a),"weeks",!0)}else"daily"===y?(u.setHours(0,0,0,0),i=m()(u).diff(m()(a),"days",!0)):(u.setHours(u.getHours(),0,0,0),i=m()(u).diff(m()(a),"hours",!0));i>=1?(e=[o],a=u,t.push(e),"yearly"===y?r.push(m()(u).format("YYYY")):"biannually"===y||"quarterly"===y||"monthly"===y?r.push(m()(u).format("MMM YYYY")):"biweekly"===y||"weekly"===y||"daily"===y?r.push(m()(u).format("MMM D YYYY")):r.push(m()(u).format("MMM D YYYY HH:mm:ss"))):e.push(o)}for(var v=0;v<t.length;v++){var p=t[v],c=void 0;if("average"===g){c=0;for(var M=0;M<p.length;M++)c+=Number(p[M].value);c/=p.length}else if("min"===g){c=Number(p[0].value);for(var Y=0;Y<p.length;Y++){var k=Number(p[Y].value);k<c&&(c=k)}}else if("max"===g){c=Number(p[0].value);for(var D=0;D<p.length;D++){var b=Number(p[D].value);b>c&&(c=b)}}else if("count"===g)c=p.length;else{c=0;for(var x=0;x<p.length;x++)c+=Number(p[x].value)}s.push(c)}return[s,r]}),[w,y,g]),b=(0,s.Z)(D,2),x=b[0],H=b[1],N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{xAxis:"none"===g?{grid:{display:!1},ticks:{display:!1}}:{}}},Z={labels:H,datasets:[{data:x,borderColor:p,backgroundColor:p}]};return(0,v.jsx)(f.Z,{sx:{height:"100%",p:2},children:"line"===c?(0,v.jsx)(o.x1,{options:N,data:Z}):(0,v.jsx)(o.$Q,{options:N,data:Z})})}},65033:function(e,t,a){a.d(t,{s:function(){return n}});var s=a(40056),r=a(86321),n=function(e,t,a,n,o){a=a||"asc",n=n||0,o=o||0;var u=(0,s.useQuery)([r.Z.QUERY_KEY,e,t,a,n,o],(function(){return r.Z.getValues(e,t,a,n,o)}),{suspense:!0,cacheTime:0}).data;return[u.data.values,u.data.totalValues]}}}]);